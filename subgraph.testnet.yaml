specVersion: 0.0.8
description: Subgraph for StarCollection and StarRedemption on Conflux eSpace
repository: https://github.com/Starcoin-Group/starcoin-subgraph
schema:
  file: ./schema.graphql

dataSources:
  - kind: ethereum/contract
    name: StarCollection
    network: conflux-espace-testnet
    source:
      address: "0x892ae1469Cc4071896Ad3627AA27De68d6464689"
      abi: StarCollection
      startBlock: 233776835
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Collected
      abis:
        - name: StarCollection
          file: ./abis/StarCollection.json
      eventHandlers:
        - event: Collected(indexed address,indexed address,uint256,uint256,uint32)
          handler: handleCollected
      file: ./src/star-collection.ts

  - kind: ethereum/contract
    name: StarRedemption
    network: conflux-espace-testnet
    source:
      address: "0xD04C2D3c8B75172caA72588b97712ecAA7FCe76c"
      abi: StarRedemption
      startBlock: 233777125
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Redeemed
      abis:
        - name: StarRedemption
          file: ./abis/StarRedemption.json
      eventHandlers:
        - event: Redeemed(indexed address,uint256,uint256)
          handler: handleRedeemed
      file: ./src/star-redemption.ts